# Server
PORT=4000

# --- SEO ---
# Public base URL used for canonical URLs, sitemap hostname, robots.txt sitemap line.
# Example: https://yourdomain.com
BASE_URL=
SITE_NAME=InfluKaburlu
DEFAULT_META_TITLE=Best Influencer Marketing Platform in India
DEFAULT_META_DESCRIPTION=Find verified influencers for brand collaborations.
DEFAULT_META_KEYWORDS=
NODE_ENV=development

# Database (PostgreSQL)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=kaburlu
DB_USER=postgres
DB_PASSWORD=postgres

# JWT
JWT_SECRET=change_me
JWT_EXPIRES_IN=900
REFRESH_TOKEN_EXPIRES_IN_DAYS=7

# Cloudflare R2
R2_ACCOUNT_ID=
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET_PUBLIC_URL=

# Razorpay
RAZORPAY_KEY_ID=rzp_test_XXXXXXXXXXXXXXXX
RAZORPAY_SECRET=XXXXXXXXXXXXXXXXXXXXXXXX
PORT=4000
DATABASE_URL=postgresql://<user>:<pass>@<host>/<db>?sslmode=require
JWT_SECRET=change_this_secret
FRONTEND_URL=<frontend-url>
NODE_ENV=development

OPENAI_API_KEY=<your-openai-key>

# Cloudflare R2
R2_ACCOUNT_ID=<your-account-id>
R2_ACCESS_KEY_ID=<access-key-id>
R2_SECRET_ACCESS_KEY=<secret-access-key>
R2_BUCKET=kaburlu
R2_PUBLIC_BASE_URL=https://<public-bucket>.r2.dev

MEDIA_MAX_IMAGE_MB=10
MEDIA_MAX_VIDEO_MB=100

# Bunny Stream (Video CDN)
# Library ID from Bunny Stream dashboard
BUNNY_STREAM_LIBRARY_ID=
# API Key for Bunny Stream (for upload/management)
BUNNY_STREAM_API_KEY=
# CDN hostname (e.g., vz-xxxxxxxx-xxx.b-cdn.net)
BUNNY_STREAM_CDN_HOSTNAME=
# Token Authentication Key (from Bunny CDN Security settings)
# Required if Token Authentication is enabled on the CDN pull zone
# Find it in: Bunny Dashboard > Stream > Library > Security > Token Authentication Key
BUNNY_CDN_TOKEN_KEY=

# Referrals
# Referrer earns this share of the platform commission amount (payout.commission).
# Example: platform commission = 20% of gross, REFERRAL_COMMISSION_RATE=0.25 => referrer earns 5% of gross.
REFERRAL_COMMISSION_RATE=0.25

# Optional: referral reward from gross.
# If set (>0), referral amount becomes: payout.grossAmount * REFERRAL_GROSS_RATE.
# Useful when PLATFORM_COMMISSION_RATE=0 (platform fee disabled) but you still want to reward referrals.
# Example: REFERRAL_GROSS_RATE=0.02 => referrer earns 2% of gross.
REFERRAL_GROSS_RATE=0

# Platform fee
# Platform commission rate taken from influencer gross pay when creating a payout.
# Set to 0 for no platform fee.
PLATFORM_COMMISSION_RATE=0.20

# PR commissions
# Default: PR earns this share of platform commission amount (payout.commission) for the brand they are assigned to.
# Example: platform commission = 20% of gross, PR_COMMISSION_RATE=0.10 => PR earns 2% of gross.
PR_COMMISSION_RATE=0.10

# Optional: PR reward from gross.
# If set (>0), PR amount becomes: payout.grossAmount * PR_GROSS_RATE.
# Useful when PLATFORM_COMMISSION_RATE=0 but you still want PR commission.
PR_GROSS_RATE=0

# Photoshoots (booking validation)
# Comma-separated allowed cities. If empty, all cities are allowed.
PHOTOSHOOT_ALLOWED_CITIES=Hyderabad,Delhi,Mumbai,Bengaluru
# Minimum lead time before requestedStartAt (hours)
PHOTOSHOOT_MIN_LEAD_HOURS=24
# Min/max booking duration in minutes
PHOTOSHOOT_MIN_DURATION_MINUTES=30
PHOTOSHOOT_MAX_DURATION_MINUTES=240

# Photoshoots (frontend link used in WhatsApp template URL buttons)
# Example: /photoshoots (will be combined with BASE_URL)
PHOTOSHOOT_FRONTEND_PATH=/photoshoots

# WhatsApp Cloud API (OTP delivery)
# Used by /api/auth/otp/request in production when OTP_DELIVERY_CHANNEL=whatsapp.
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_ACCESS_TOKEN=
WHATSAPP_API_VERSION=v19.0
# Default country code used when you pass a 10-digit local number (e.g. 9502337775 -> 919502337775)
WHATSAPP_DEFAULT_COUNTRY_CODE=91

# Template configuration
# For Google/Gmail linking OTP (used when purpose=google_link)
WHATSAPP_GMAIL_LINK_TEMPLATE_NAME=gamillinking
WHATSAPP_GMAIL_LINK_TEMPLATE_LANG=en_US

# Template body parameter mode:
# - otp_only: sends only the OTP as a single body parameter
# - full: sends 5 body parameters (matches the example template variables)
WHATSAPP_GMAIL_LINK_TEMPLATE_MODE=otp_only
WHATSAPP_GMAIL_LINK_PARAM1=linking
WHATSAPP_GMAIL_LINK_PARAM2=Gmail
WHATSAPP_GMAIL_LINK_PARAM3=your email
WHATSAPP_GMAIL_LINK_PARAM5=support

# Optional generic OTP template (used for other purposes)
WHATSAPP_OTP_TEMPLATE_NAME=
WHATSAPP_OTP_TEMPLATE_LANG=en_US

# MPIN reset OTP template
WHATSAPP_MPIN_RESET_TEMPLATE_NAME=
WHATSAPP_MPIN_RESET_TEMPLATE_LANG=en_US
WHATSAPP_MPIN_RESET_TEMPLATE_MODE=otp_only
WHATSAPP_MPIN_RESET_PARAM1=reset
WHATSAPP_MPIN_RESET_PARAM2=MPIN
WHATSAPP_MPIN_RESET_PARAM3=your account
WHATSAPP_MPIN_RESET_PARAM5=support

# Optional per-purpose template mode (default otp_only)
WHATSAPP_OTP_TEMPLATE_MODE=otp_only

# Referral invite (marketing template)
WHATSAPP_REFERRAL_INVITE_TEMPLATE_NAME=influ_referral_invite
WHATSAPP_REFERRAL_INVITE_TEMPLATE_LANG=en
# Most referral templates have a URL button; set true if your template requires it.
WHATSAPP_REFERRAL_INVITE_INCLUDE_BUTTON_URL=true
# What to pass into the URL button variable: "code" (default) or "url"
WHATSAPP_REFERRAL_INVITE_BUTTON_PARAM=code

# Photoshoot notifications (template messages)
# 1) Request created (sent when influencer creates photoshoot request)
WHATSAPP_PHOTOSHOOT_REQUEST_CREATED_TEMPLATE_NAME=
WHATSAPP_PHOTOSHOOT_REQUEST_CREATED_TEMPLATE_LANG=en_US
# Template body params mode:
# - name_only: sends 1 body param ({{1}} = influencerName)
# - name_ulid: sends 2 body params ({{1}} = influencerName, {{2}} = requestUlid)
WHATSAPP_PHOTOSHOOT_REQUEST_CREATED_BODY_MODE=name_ulid
WHATSAPP_PHOTOSHOOT_REQUEST_CREATED_INCLUDE_BUTTON_URL=false
# What to pass into URL button variable: "ulid" (default) or "url"
WHATSAPP_PHOTOSHOOT_REQUEST_CREATED_BUTTON_PARAM=ulid

# 2) Scheduled (sent when superadmin assigns final date/time)
WHATSAPP_PHOTOSHOOT_SCHEDULED_TEMPLATE_NAME=
WHATSAPP_PHOTOSHOOT_SCHEDULED_TEMPLATE_LANG=en_US
WHATSAPP_PHOTOSHOOT_SCHEDULED_INCLUDE_BUTTON_URL=false
# What to pass into URL button variable: "ulid" (default) or "url"
WHATSAPP_PHOTOSHOOT_SCHEDULED_BUTTON_PARAM=ulid

# 3) Portfolio uploaded (sent when photos are added to a profile pack)
WHATSAPP_PORTFOLIO_UPLOADED_TEMPLATE_NAME=
WHATSAPP_PORTFOLIO_UPLOADED_TEMPLATE_LANG=en_US
WHATSAPP_PORTFOLIO_UPLOADED_INCLUDE_BUTTON_URL=false
# What to pass into URL button variable: "url" (default) or "packid"
WHATSAPP_PORTFOLIO_UPLOADED_BUTTON_PARAM=url

# Frontend link returned by the API (for client-side sharing)
REFERRAL_INVITE_FRONTEND_URL=https://your-frontend-domain.com
REFERRAL_INVITE_PATH=/referral

# Abuse protection (in-memory)
REFERRAL_INVITE_RATE_WINDOW_MS=600000
REFERRAL_INVITE_RATE_MAX=5

# If your template has a URL button and expects the OTP as the button parameter
WHATSAPP_OTP_INCLUDE_BUTTON_URL=false

# If your Gmail-link template has a URL button that requires a parameter
WHATSAPP_GMAIL_LINK_INCLUDE_BUTTON_URL=false

# If your MPIN-reset template has a URL button that requires a parameter
WHATSAPP_MPIN_RESET_INCLUDE_BUTTON_URL=false

# OTP delivery behavior
OTP_DELIVERY_CHANNEL=whatsapp

# OTP request rate limiting (DB-backed)
OTP_REQUEST_RATE_WINDOW_MINUTES=10
OTP_REQUEST_RATE_MAX=3
